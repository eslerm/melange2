package:
  name: source-test
  version: 1.0.0
  epoch: 0
  description: Test that uses source directory for test fixtures

pipeline: []

test:
  pipeline:
    - name: verify-test-fixture
      runs: |
        # The e2e test should have copied a test fixture file
        if [ ! -f /home/build/test-fixture.txt ]; then
          echo "ERROR: Test fixture file not found"
          exit 1
        fi

        # Verify the content
        content=$(cat /home/build/test-fixture.txt)
        if [ "$content" != "test-fixture-content" ]; then
          echo "ERROR: Test fixture content mismatch"
          echo "Expected: test-fixture-content"
          echo "Got: $content"
          exit 1
        fi

        echo "Test fixture verified successfully"

    - name: create-result-marker
      runs: |
        mkdir -p /home/build/markers
        echo "source-test-passed" > /home/build/markers/source-test.txt
